{% extends 'new_base.html' %}

{% block content %}


<head>
    <title>Track Grades</title>
</head>

<br>
<h5 align="center">{{ student.name }}'s Grades</h5>

    <table class="responsive-table striped" style="width: 90%; margin: 5% 5% 5% 5%">
        <tr>
            <th>Subject</th>
            {% for score in student.class_set.first.classgrade_set.all %}
                <th>{{ score.date }}</th>
            {% endfor %}
        </tr>
        {% for class in student.class_set.all %}
        <tr>

            <td>{{ class.name }}</td>
            {% for grade in class.classgrade_set.all %}
                <td>{{ grade.score }}</td>
            {% endfor %}
        </tr>
        {% endfor %}

    </table>





    <div class="col s12 m12 l4 xl4 offset-l4 center-align">
        <a class="waves-effect waves-light btn view green white-text modal-trigger" href="#grade-modal"  style="margin-top: 5%;">Input Grades<i class="material-icons right">add</i></a>
    </div>




    <div id="grade-modal" class="modal">
        <div class="modal-content">
            <h4 class="center-align">Input Grades</h4>
                <form method="post" action="/student/{{ student.username }}/track_grades" id="input-grades">
                    {% csrf_token %}

                    <div class="row" align="center">
                    <div class="col s4" align="center">
                        <b>Date:</b><input class="input-field" type="date" name="entry_date"></div>

                             <div class="col s4">
                            <label>Select a Session</label>
                               <select form="input-grades" id="session_number" name="session_number">
                                  <option value = "" disabled selected>Select Session</option>
                                   {% for session in sessions %}
                                   <option value = "{{ forloop.counter0 }}">Session {{ forloop.counter }}: {{ session.date }}</option>
                                   {% if session == sessions.last %}
                                   <option value = "{{ forloop.counter }}">New Session</option>
                                   {% endif %}
                                   {% endfor %}
                               </select>
                             </div>
                    </div>
                    {% for class in student.class_set.all %}
                    <div class="row">
                        <div class="col s4">
                            <div class="input-field">
                                <input id="{{ class.name }}_score" type="number" class="validate" name="{{ class.name }}_score">
                                <label for="{{ class.name }}_score">{{ class.name }} Grade</label>
                             </div>

                    </div>
                    {% endfor %}

                    </div>
                    <button class="btn waves-effect waves-light green lighten-2" type="submit" name="action">Submit
                        <i class="material-icons right">add</i>
                    </button>
                    <a href="#" class="modal-close waves-effect waves-green btn-flat black white-text right">Close</a>
                </form>
        </div>
    </div>

<script>
    $(document).ready(function(){
    // the "href" attribute of .modal-trigger must specify the modal ID that wants to be triggered
    $('.modal-trigger').leanModal();
  });
    $(document).ready(function() {
            $('select').material_select();
         });
    </script>

{% endblock %}
